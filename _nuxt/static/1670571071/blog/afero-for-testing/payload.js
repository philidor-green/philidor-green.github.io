__NUXT_JSONP__("/blog/afero-for-testing", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu){return {data:[{article:{slug:"afero-for-testing",description:"This is an example how to test http upload without access to real filesystem with afero.",title:an,created_at:"2022-01-13T11:02:57.000Z",toc:[],body:{type:"root",children:[{type:b,tag:"h1",props:{id:"test-file-uploads-with-afero-in-golang"},children:[{type:b,tag:Z,props:{href:"#test-file-uploads-with-afero-in-golang",ariaHidden:ao,tabIndex:-1},children:[{type:b,tag:c,props:{className:["icon","icon-link"]},children:[]}]},{type:a,value:an}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"Suppose we have a simple file upload http handler looks like this:"}]},{type:a,value:g},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,ap]},children:[{type:b,tag:z,props:{},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aq}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"fmt\""}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:at}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"log\""}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:au}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:_}]},{type:a,value:"\n\n    "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:av}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"const"}]},{type:a,value:" MB "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"="}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:"1"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"\u003C\u003C"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:"20"}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"main"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    r "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ax}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:ax}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:az},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aD}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aE}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"HandlerFunc "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ab}]},{type:a,value:aF},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aG}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"res http"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"ResponseWriter"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" req "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:B}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"ParseMultipartForm"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:"50"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I}]},{type:a,value:" MB"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aI}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:C}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n            log"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n            res"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:Q},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ab}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ae}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:A}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n            err "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"RemoveAll"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:Q},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:B}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:C}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"Cant delete multipart error %s\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:Q},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aK},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aN}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aP}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aL},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"File "},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:Q},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aN}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" hdr "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aP}]},{type:a,value:aO},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aM},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"Income file name: %s\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"Filename"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n\n                infile"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:aQ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:B}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:C}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"Handle open error: %v\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aV}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ae}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n\n                f"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"OpenFile"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\".\u002Fdownloaded\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"O_WRONLY"},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:"|"}]},{type:a,value:"os"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"O_CREATE"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:"0666"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:B}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:C}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:aS},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:P}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aX}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:T},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aT},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:ac}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:ad},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:aU},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aV}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:O},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ae}]},{type:a,value:" f"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n                io"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"f"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:aW},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:Q},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:"\n        res"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aZ}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"Set"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"text\u002Fhtml\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n        fmt"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"Fprint"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:a_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"\u003Ch2\u003ESuccess\u003C\u002Fh2\u003E\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"type"}]},{type:a,value:" Router "},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"struct"}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I}]},{type:a,value:ay},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"Router\n"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aA}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" path "},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" h http"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aG},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    r"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"HandleFunc"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"path"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" h"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"Methods"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:ba},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:a$},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I}]},{type:a,value:R},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aC}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:bb},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" origins "},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    c "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:" cors"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"New"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"cors"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"Options"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n        AllowedOrigins"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"origins"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n        AllowedMethods"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aB}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"GET\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"OPTIONS\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"PUT\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"DELETE\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n        AllowedHeaders"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:a,value:ai},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"Accept\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"If-None-Match\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"Content-Length\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"Accept-Encoding\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"Authorization\""}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:"\n        AllowCredentials"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:V}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:ao}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n\n    handler "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:" c"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"Handler"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"r"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    http"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"ListenAndServe"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:bb},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" handler"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"vars"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"req "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aH},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:"map"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:W}]},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:X}]},{type:b,tag:c,props:{className:[d,L]},children:[{type:a,value:h}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:ab}]},{type:a,value:" mux"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"Vars"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"req"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"The code above is a common way to upload file onto server. The code below is for testing:"}]},{type:a,value:g},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,ap]},children:[{type:b,tag:z,props:{},children:[{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:aq}]},{type:a,value:ar},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:as}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"bytes\""}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:at}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:"\"mime\u002Fmultipart\""}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:au}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bc}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:_}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bd}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:x},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:A}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"TestMain"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"t "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:I}]},{type:a,value:"testing"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"T"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:"\n    filePath "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:"\n    fieldName "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bf}]},{type:a,value:"\n    body "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"new"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"bytes"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"Buffer"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    mw "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:" multipart"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"NewWriter"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"body"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    file"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:ah},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aR}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"filePath"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:B}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:C}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:"\n    w"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"CreateFormFile"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"fieldName"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" filePath"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:B}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:C}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:B}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:af}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:" io"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aY}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:"w"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" file"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:aI}]},{type:a,value:v},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:C}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,w]},children:[{type:a,value:K}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:ak},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:"\n    mw"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:ag}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n\n    req "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:bh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"NewRequest"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:N},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"MethodPost"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:$}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:" body"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    req"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:aZ},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"Add"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bg},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"FormDataContentType"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    res "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:bh},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"NewRecorder"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n    handler "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:t}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:aa}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:"\n\n    handler"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"ServeHTTP"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:a,value:a_},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:S},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,o]},children:[{type:a,value:B}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"Code "},{type:b,tag:c,props:{className:[d,n]},children:[{type:a,value:C}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:bj}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:q}]},{type:a,value:Y},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,l]},children:[{type:a,value:"Errorf"}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:j}]},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bk}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:f},{type:b,tag:c,props:{className:[d,M]},children:[{type:a,value:bj}]},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:m}]},{type:a,value:bi},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:i}]},{type:a,value:"Code"},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:k}]},{type:a,value:p},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,e]},children:[{type:a,value:r}]},{type:a,value:x}]}]}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"The problem here is that our test is actually working with real filesystem.\nWe need a bunch of things in order to have desired result."}]},{type:a,value:g},{type:b,tag:bl,props:{},children:[{type:a,value:g},{type:b,tag:D,props:{},children:[{type:a,value:"it needs actual file to upload"}]},{type:a,value:g},{type:b,tag:D,props:{},children:[{type:a,value:"we should check uploaded file saved without errors"}]},{type:a,value:g},{type:b,tag:D,props:{},children:[{type:a,value:"we should have a cleanup procedure in order to delete saved file"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"There is a way to test our handler without access to real filesystem.\nThe "},{type:b,tag:Z,props:{href:"https:\u002F\u002Fgithub.com\u002Fspf13\u002Fafero",rel:[bm,bn,bo],target:bp},children:[{type:a,value:bq}]},{type:a,value:" can help here."}]},{type:a,value:g},{type:b,tag:"blockquote",props:{},children:[{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"The MemMapFs backend is perfect for testing."}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:bl,props:{},children:[{type:a,value:g},{type:b,tag:D,props:{},children:[{type:a,value:"Much faster than performing I\u002FO operations on disk"}]},{type:a,value:g},{type:b,tag:D,props:{},children:[{type:a,value:"Avoid security issues and permissions"}]},{type:a,value:g},{type:b,tag:D,props:{},children:[{type:a,value:"Far more control. 'rm -rf \u002F' with confidence"}]},{type:a,value:g},{type:b,tag:D,props:{},children:[{type:a,value:"Test setup is far more easier to do"}]},{type:a,value:g},{type:b,tag:D,props:{},children:[{type:a,value:"No test cleanup needed"}]},{type:a,value:g}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"The output of our test:"}]},{type:a,value:g},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,al]},children:[{type:b,tag:z,props:{},children:[{type:a,value:br}]}]}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"After tests the saved file is in the directory exactly how our handler process it."}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"Now let's use "},{type:b,tag:z,props:{},children:[{type:a,value:bq}]},{type:a,value:"!"}]},{type:a,value:g},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,bs]},children:[{type:b,tag:z,props:{},children:[{type:a,value:"diff --git main.go main.go\nindex 999fe42..2157943 100644\n"},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"--- main.go"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+++ main.go"}]},{type:a,value:"\n@@ -9,6 +9,7 @@ import (\n\n        "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:av}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aw}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:bt}]},{type:a,value:"\n )\n\n const MB = 1 \u003C\u003C 20\n@@ -16,12 +17,14 @@ const MB = 1 \u003C\u003C 20\n func main() {\n        r := &Router{&mux.Router{}}\n\n"},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"-       r.MustResponse(\"POST\", \"\u002F\", processFile())"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       var AppFs = afero.NewOsFs()"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:am}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       r.MustResponse(\"POST\", \"\u002F\", processFile(AppFs))"}]},{type:a,value:"\n\n        r.Run("},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aD}]},{type:a,value:", "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aE}]},{type:a,value:")\n }\n\n"},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"-func processFile() http.HandlerFunc {"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+func processFile(fs afero.Fs) http.HandlerFunc {"}]},{type:a,value:"\n        return http.HandlerFunc(func(res http.ResponseWriter, req *http.Request) {\n                if err := req.ParseMultipartForm(50 * MB); nil != err {\n                        log.Printf("},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aJ}]},{type:a,value:", err)\n@@ -38,7 +41,7 @@ func processFile() http.HandlerFunc {\n\n                for _, fheaders := range req.MultipartForm.File {\n                        for _, hdr := range fheaders {\n"},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"-                               log.Printf(\"Income file len: %d\", hdr.Size)"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+                               log.Printf(\"Income file: %s\", hdr.Filename)"}]},{type:a,value:"\n\n                                infile, err := hdr.Open()\n                                if err != nil {\n@@ -48,7 +51,7 @@ func processFile() http.HandlerFunc {\n                                }\n                                defer infile.Close()\n\n"},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"-                               f, err := os.OpenFile(\".\u002Fdownloaded\", os.O_WRONLY|os.O_CREATE, 0666)"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+                               f, err := fs.OpenFile(\".\u002Fdownloaded\", os.O_WRONLY|os.O_CREATE, 0666)"}]},{type:a,value:"\n                                if err != nil {\n                                        log.Printf("},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:aX}]},{type:a,value:", err)\n                                        res.WriteHeader(http.StatusInternalServerError)\ndiff --git main_test.go main_test.go\nindex d3875bf..66739c7 100644\n"},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"--- main_test.go"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+++ main_test.go"}]},{type:a,value:"\n@@ -8,14 +8,19 @@ import (\n        "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bc}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:_}]},{type:a,value:J},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bd}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:am}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:bt}]},{type:a,value:"\n )\n\n func TestMain(t *testing.T) {\n        filePath := "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:be}]},{type:a,value:"\n        fieldName := "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bf}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       var AppFs = afero.NewMemMapFs()"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:am}]},{type:a,value:"\n        body := new(bytes.Buffer)\n        mw := multipart.NewWriter(body)\n"},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"-       file, err := os.Open(filePath)"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       afero.WriteFile(AppFs, filePath, []byte(\"hello world\"), 0644)"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       file, err := AppFs.Create(filePath)"}]},{type:a,value:"\n        if err != nil {\n                t.Fatal(err)\n        }\n@@ -32,10 +37,15 @@ func TestMain(t *testing.T) {\n        req := httptest.NewRequest(http.MethodPost, "},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:$}]},{type:a,value:", body)\n        req.Header.Add("},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:U}]},{type:a,value:", mw.FormDataContentType())\n        res := httptest.NewRecorder()\n"},{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"-       handler := processFile()"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       handler := processFile(AppFs)"}]},{type:a,value:"\n\n        handler.ServeHTTP(res, req)\n        if res.Code != 200 {\n                t.Errorf("},{type:b,tag:c,props:{className:[d,h]},children:[{type:a,value:bk}]},{type:a,value:", 200, res.Code)\n        }\n"},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       fileName := \"downloaded\""}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       _, err = AppFs.Stat(fileName)"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       if os.IsNotExist(err) {"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+               t.Errorf(\"file \\\"%s\\\" does not exist.\\n\", fileName)"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+       }"}]},{type:a,value:g}]}]}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"With a little change we create a mock filesystem for testing purpose. Let's run new tests."}]},{type:a,value:g},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,al]},children:[{type:b,tag:z,props:{},children:[{type:a,value:br}]}]}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"It's pass! Let's break our handler to check if tests actually works."}]},{type:a,value:g},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,bs]},children:[{type:b,tag:z,props:{},children:[{type:b,tag:c,props:{className:[d,y]},children:[{type:a,value:"- f, err := os.OpenFile(\".\u002Fdownloaded\", os.O_WRONLY|os.O_CREATE, 0666)"}]},{type:a,value:g},{type:b,tag:c,props:{className:[d,s]},children:[{type:a,value:"+ f, err := fs.OpenFile(\".\u002Fdownload\", os.O_WRONLY|os.O_CREATE, 0666)"}]},{type:a,value:"\n                                if err != nil {\n"}]}]}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"Tests fails due to not exist file. Just as we want."}]},{type:a,value:g},{type:b,tag:E,props:{className:[F]},children:[{type:b,tag:G,props:{className:[H,al]},children:[{type:b,tag:z,props:{},children:[{type:a,value:"Running tool: \u002Fusr\u002Fbin\u002Fgo test -timeout 30s -run ^TestMain$ httptestfs -v\n\n=== RUN   TestMain\n2022\u002F01\u002F13 15:31:55 Income file: file.jpg\n    \u002Fhome\u002Fuser\u002Fdev\u002Fhttpfs\u002Fmain_test.go:49: file \"downloaded\" does not exist.\n--- FAIL: TestMain (0.00s)\nFAIL\nFAIL    httptestfs  0.002s\n"}]}]}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"You can find the source code "},{type:b,tag:Z,props:{href:"https:\u002F\u002Fgithub.com\u002Fphilidor-green\u002Fhttpfs",rel:[bm,bn,bo],target:bp},children:[{type:a,value:"here"}]}]},{type:a,value:g},{type:b,tag:u,props:{},children:[{type:a,value:"Thanks."}]}]},dir:"\u002Farticles",path:"\u002Farticles\u002Fafero-for-testing",extension:".md",createdAt:bu,updatedAt:bu}}],fetch:{},mutations:void 0}}("text","element","span","token","punctuation"," ","\n","string",".","(",")","function",",","operator","keyword","\n    ","{","}","inserted",":=","p"," err ","boolean","\n\n","deleted","code","func","if","!=","li","div","nuxt-content-highlight","pre","line-numbers","*","\n        ","nil","builtin","number","http","\n                ","Printf","\n            ","Router"," req"," err","\"Content-Type\"",":","[","]","\n        t","a","\"os\"","\"\u002F\"","processFile","return","WriteHeader","StatusInternalServerError","defer","_","Close"," os","   ","Fatal","err","language-text","+","Test file uploads with afero in Golang","true","language-go","package"," main\n\n","import","\"io\"","\"net\u002Fhttp\"","\"github.com\u002Fgorilla\u002Fmux\"","\"github.com\u002Frs\u002Fcors\"","&","mux","\n\n    r","MustResponse","\"POST\"","Run","\":8080\"","\"*\""," http","HandlerFunc","Request",";","\"while parse %s\"","\n\n        ","MultipartForm","\n                log","for"," fheaders ","range"," hdr","Open","\n                    log","\n                    res","\n                    ","continue"," infile","\"Create Read Input error %v\"","Copy","Header","res","r ","meth","address","\"net\u002Fhttp\u002Fhttptest\"","\"testing\"","\"file.jpg\"","\"file\""," mw"," httptest"," res","200","\"Expected %d, received %d\"","ul","nofollow","noopener","noreferrer","_blank","afero","Running tool: \u002Fusr\u002Fbin\u002Fgo test -timeout 30s -run ^TestMain$ httptestfs -v\n\n=== RUN   TestMain\n2022\u002F01\u002F13 15:24:21 Income file: file.jpg\n--- PASS: TestMain (0.00s)\nPASS\nok      httptestfs  0.002s\n","language-git","+       \"github.com\u002Fspf13\u002Fafero\"","2022-12-08T16:42:07.869Z")));